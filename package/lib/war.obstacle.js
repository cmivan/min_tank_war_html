/*************
 * 障碍物
 * BY：CM.Ivan
 * EMail：cm.ivan@qq.com
 *************/
function Obstacle(war){
var _this = new Object();
	_this.id = 'obstacle_' + parseInt(Math.random() * 1000000000);
	_this.img = 'package/skin/default/tree.png';
	_this.arrow = 't';
	_this.left = 100;
	_this.top = 100;
	_this.width = 175;
	_this.height = 175;
	_this.attack  = 50;
	_this.defense = 50;
	_this.powerMax= 100;
	_this.clas = 'collision';
	_this.type = 'obstacle';
	_this.powerBody=function(){_this.body.find('\x2e\x70\x6f\x77\x65\x72').css({'\x6c\x65\x66\x74':'\x30','\x74\x6f\x70':'\x2d\x31\x30\x70\x78','\x77\x69\x64\x74\x68':'\x35\x30\x70\x78','\x68\x65\x69\x67\x68\x74':'\x32\x30\x70\x78','\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x61\x62\x73\x6f\x6c\x75\x74\x65'}).find('\x2e\x62\x61\x72').css({'\x68\x65\x69\x67\x68\x74':'\x34\x70\x78','\x6c\x69\x6e\x65\x2d\x68\x65\x69\x67\x68\x74':'\x34\x70\x78','\x62\x6f\x72\x64\x65\x72':'\x23\x30\x36\x30\x20\x31\x70\x78\x20\x73\x6f\x6c\x69\x64','\x62\x6f\x78\x2d\x73\x68\x61\x64\x6f\x77':'\x30\x20\x31\x70\x78\x20\x33\x70\x78\x20\x23\x33\x33\x33\x20\x62\x64','\x2d\x6d\x6f\x7a\x2d\x62\x6f\x78\x2d\x73\x68\x61\x64\x6f\x77':'\x30\x20\x31\x70\x78\x20\x33\x70\x78\x20\x23\x33\x33\x33\x20\x62\x64','\x2d\x77\x65\x62\x6b\x69\x74\x2d\x62\x6f\x78\x2d\x73\x68\x61\x64\x6f\x77':'\x30\x20\x31\x70\x78\x20\x33\x70\x78\x20\x23\x33\x33\x33\x20\x62\x64','\x6f\x76\x65\x72\x66\x6c\x6f\x77':'\x68\x69\x64\x64\x65\x6e'}).find('\x64\x69\x76').css({'\x77\x69\x64\x74\x68':'\x31\x30\x30\x25','\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x63\x6f\x6c\x6f\x72':'\x23\x30\x36\x30','\x6f\x76\x65\x72\x66\x6c\x6f\x77':'\x68\x69\x64\x64\x65\x6e','\x6f\x70\x61\x63\x69\x74\x79':'\x30\x2e\x36'});_this.body.find('\x2e\x6d\x61\x73\x6b').css({'\x77\x69\x64\x74\x68':_this.width+'\x70\x78','\x68\x65\x69\x67\x68\x74':_this.height+'\x70\x78','\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x63\x6f\x6c\x6f\x72':'\x23\x33\x33\x33','\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x61\x62\x73\x6f\x6c\x75\x74\x65','\x62\x6f\x72\x64\x65\x72':'\x23\x39\x39\x39\x20\x31\x70\x78\x20\x73\x6f\x6c\x69\x64','\x62\x6f\x72\x64\x65\x72\x2d\x72\x61\x64\x69\x75\x73':'\x32\x30\x70\x78','\x6f\x70\x61\x63\x69\x74\x79':'\x30\x2e\x32'});_this.body.find('\x2e\x6d\x61\x73\x6b').fadeOut(0x0);_this.body.find('\x2e\x70\x6f\x77\x65\x72').fadeOut(0x0)}
	_this.powerUpdate=function(a){var b=_this.power-((a*a)/(_this.defense*0x2));b=parseInt(b);if(b<=0x0){b=0x0};_this.powerTo(b);if(b==0x0){return true}else{return false}}
	_this.powerTo = function(_val){
		_this.power = _val;
		//红色警告颜色
_bar=_this.body.find('\x2e\x70\x6f\x77\x65\x72').find('\x2e\x62\x61\x72');if(_val<=(_this.powerMax/2.5)){_bar.css({'\x62\x6f\x72\x64\x65\x72':'\x23\x39\x30\x30\x20\x31\x70\x78\x20\x73\x6f\x6c\x69\x64'}).find('\x64\x69\x76').css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x63\x6f\x6c\x6f\x72':'\x23\x39\x30\x30'})}
		_val = parseInt(_val/_this.powerMax*100);
		_this.body.find('.power').find('span').text(_val)
		_bar.find('div').animate({'width':_val+'%'},200);
	}
	_this.powerShow=function(){_this.body.find('\x2e\x6d\x61\x73\x6b').fadeIn(0x0);_this.body.find('\x2e\x70\x6f\x77\x65\x72').fadeIn(0x0)};_this.powerHide=function(){_this.body.find('\x2e\x6d\x61\x73\x6b').fadeOut(0x258);_this.body.find('\x2e\x70\x6f\x77\x65\x72').fadeOut(0x12c)}
	_this.creat=function(){_this.power=_this.powerMax;_this.body=$('\x3c\x64\x69\x76\x3e\x3c\x64\x69\x76\x20\x63\x6c\x61\x73\x73\x3d\x22\x70\x6f\x77\x65\x72\x22\x3e\x3c\x73\x70\x61\x6e\x3e'+_this.power+'\x3c\x2f\x73\x70\x61\x6e\x3e\x3c\x64\x69\x76\x20\x63\x6c\x61\x73\x73\x3d\x22\x62\x61\x72\x22\x3e\x3c\x64\x69\x76\x3e\x26\x6e\x62\x73\x70\x3b\x3c\x2f\x64\x69\x76\x3e\x3c\x2f\x64\x69\x76\x3e\x3c\x2f\x64\x69\x76\x3e\x3c\x64\x69\x76\x20\x63\x6c\x61\x73\x73\x3d\x22\x6d\x61\x73\x6b\x22\x3e\x26\x6e\x62\x73\x70\x3b\x3c\x2f\x64\x69\x76\x3e\x3c\x2f\x64\x69\x76\x3e');var a=_this.left-(_this.width/0x2);var b=_this.top-(_this.height/0x2);_this.body.appendTo('\x62\x6f\x64\x79').attr('\x69\x64',_this.id).css({'\x6c\x65\x66\x74':a,'\x74\x6f\x70':b,'\x77\x69\x64\x74\x68':_this.width+'\x70\x78','\x68\x65\x69\x67\x68\x74':_this.height+'\x70\x78','\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x69\x6d\x61\x67\x65':'\x75\x72\x6c\x28'+_this.img+'\x29','\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x63\x6f\x6c\x6f\x72':'','\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x61\x62\x73\x6f\x6c\x75\x74\x65','\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x72\x65\x70\x65\x61\x74':'\x6e\x6f\x2d\x72\x65\x70\x65\x61\x74'});_this.obj=$('\x23'+_this.id);if(_this.clas!=null){_this.obj.attr('\x63\x6c\x61\x73\x73',_this.clas)};if(_this.type!=null){_this.obj.attr('\x74\x79\x70\x65',_this.type)};_this.powerBody()};
	_this.reArrow=function(){var a=arguments[0x0]?arguments[0x0]:_this.arrow;if(war.stop==false){switch(a){case'\x74':_this.arrow=a;_this.obj.css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x6c\x65\x66\x74\x20\x74\x6f\x70'});break;case'\x62':_this.arrow=a;_this.obj.css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x72\x69\x67\x68\x74\x20\x74\x6f\x70'});break;case'\x6c':_this.arrow=a;_this.obj.css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x62\x6f\x74\x74\x6f\x6d\x20\x72\x69\x67\x68\x74'});break;case'\x72':_this.arrow=a;_this.obj.css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x70\x6f\x73\x69\x74\x69\x6f\x6e':'\x62\x6f\x74\x74\x6f\x6d\x20\x6c\x65\x66\x74'});break}}}
	_this.moveID = null;
	_this.display=function(){if(_this.moveID!=null){clearTimeout(_this.moveID)};_this.obj.css({'\x62\x61\x63\x6b\x67\x72\x6f\x75\x6e\x64\x2d\x63\x6f\x6c\x6f\x72':'\x23\x30\x36\x30'});_this.obj.fadeOut(0x12c,function(){$(this).remove()});war.allobj.remove(_this);delete _this};
	return _this;
}